# æ¨¡å‹è¯„ä¼°

æœ¬é¡¹ç›®ç”¨äºè¯„ä¼°ä¸åŒè®­ç»ƒæ–¹å¼ä¸‹çš„åŸºç¡€å››åˆ™è¿ç®—æ¨¡å‹åœ¨ GSM8K å’Œå°å­¦æ•°æ®é›†ï¼ˆprimaryï¼‰ä¸Šçš„æ¨ç†æ€§èƒ½ã€‚å½“å‰æ”¯æŒä»¥ä¸‹ä¸‰ç±»æ¨¡å‹çš„è¯„ä¼°ï¼š

- baselineï¼ˆé›¶å¾®è°ƒï¼‰
- non-loop finetunedï¼ˆå¸¸è§„æ–¹å¼å¾®è°ƒï¼‰
- loop finetunedï¼ˆå¸¦å¾ªç¯ç»“æ„å¾®è°ƒï¼‰

## ğŸ“ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ data                         # æ•°æ®ç›®å½•
â”‚   â””â”€â”€ primary                 # å°å­¦å››åˆ™è¿ç®—æ•°æ®é›†
â”‚       â”œâ”€â”€ arithmetic_dataset.json         # ä¸»æ•°æ®é›†æ–‡ä»¶
â”‚       â”œâ”€â”€ generate_arithmetic_dataset.py  # æ•°æ®ç”Ÿæˆè„šæœ¬
â”‚       â””â”€â”€ README.md
â”œâ”€â”€ infer_mp.py                 # å¤šè¿›ç¨‹æ¨ç†ä¸»è„šæœ¬
â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ requirements.txt            # æ‰€éœ€Pythonä¾èµ–
â”œâ”€â”€ scripts
â”‚   â”œâ”€â”€ infer_loop_finetuned.sh     # è¯„ä¼° loop finetuned æ¨¡å‹çš„è„šæœ¬
â”‚   â””â”€â”€ infer_non-loop.sh           # è¯„ä¼° baseline å’Œ non-loop æ¨¡å‹çš„è„šæœ¬
â”œâ”€â”€ setup.sh                    # ç¯å¢ƒé…ç½®è„šæœ¬
â””â”€â”€ src
    â””â”€â”€ config.py              # æ¨ç†é…ç½®æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒé…ç½®

è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å®‰è£…ä¾èµ–å¹¶è®¾ç½®è¿è¡Œç¯å¢ƒï¼š

```bash
sh setup.sh
```

> è¯¥è„šæœ¬ä¼šè‡ªåŠ¨åˆ›å»º Python è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…æ‰€éœ€ä¾èµ–ã€‚

### 2. æ¨¡å‹è¯„ä¼°

ä½¿ç”¨ä»¥ä¸‹è„šæœ¬è¿›è¡Œä¸åŒæ¨¡å‹çš„æ¨ç†è¯„ä¼°ï¼š

#### è¯„ä¼° baseline ä¸ non-loop finetuned æ¨¡å‹

```bash
sh scripts/infer_non-loop.sh
```

#### è¯„ä¼° loop finetuned æ¨¡å‹

```bash
sh scripts/infer_loop_finetuned.sh
```

æ¯ä¸ªè„šæœ¬è¿è¡Œåä¼šè¾“å‡ºè¯¥æ¨¡å‹åœ¨æŒ‡å®šæ•°æ®é›†ï¼ˆGSM8K æˆ– primaryï¼‰ä¸Šçš„å‡†ç¡®ç‡ç­‰æŒ‡æ ‡ã€‚

### 3. æ•°æ®è¯´æ˜

é¡¹ç›®é»˜è®¤ä½¿ç”¨ `data/primary/arithmetic_dataset.json` ä½œä¸ºå°å­¦å››åˆ™è¿ç®—æ•°æ®ï¼Œæ•°æ®é€šè¿‡ä¸‹é¢çš„è„šæœ¬ç”¨ `generate_arithmetic_dataset.py` ç”Ÿæˆï¼š

```bash
python data/primary/generate_arithmetic_dataset.py
```

## ğŸ“Š æ¨¡å‹è¯„ä¼°ç»“æœ

| æ•°æ®é›†   | baseline | baseline finetuned | loop finetuned |
|----------|----------|--------------------|----------------|
| gsm8k    | 70.89%   | 77.71%             | 82.26%         |
| primary  | 47.30%   | 58.60%             | 74.30%         |